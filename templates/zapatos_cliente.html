{% extends "base.html" %}

{% block content %}
<h2>Zapatos de {{ cliente.nombre }} {{ cliente.apellido }}</h2>

<button onclick="abrirModal()">‚ûï Agregar zapato</button>

<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close" onclick="cerrarModal()">&times;</span>

    <form method="POST" action="/zapatos/guardar">
      <input type="hidden" name="id_zapato" id="id_zapato">
      <input type="hidden" name="id_cliente" value="{{ cliente.id_cliente }}">

      <input type="text" name="color_base" placeholder="Color base" required>
      <input type="text" name="color_secundario" placeholder="Color secundario">
      <input type="text" name="material" placeholder="Material">

      <button type="submit">Guardar</button>
    </form>
  </div>
</div>

<table border="1">
<tr>
    <th>Color</th>
    <th>Material</th>
    <th>Acciones</th>
</tr>

{% for z in zapatos %}
<tr>
    <td>{{ z.color_base }} / {{ z.color_secundario }}</td>
    <td>{{ z.material }}</td>
    <td>
        <button onclick="editarZapato(
            {{ z.id_zapato }},
            '{{ z.color_base }}',
            '{{ z.color_secundario }}',
            '{{ z.material }}'
            )">‚úèÔ∏è
        </button>

        <a href="/zapatos/eliminar/{{ z.id_zapato }}/{{ cliente.id_cliente }}" onclick="return confirm('¬øEliminar zapato?')">üóëÔ∏è</a>
    </td>
</tr>
{% endfor %}
</table>

<script>
function abrirModal(){ document.getElementById("modal").style.display="block"; }
function cerrarModal(){ document.getElementById("modal").style.display="none"; }

function editarZapato(id, base, sec, mat){
  abrirModal();
  document.getElementById("id_zapato").value=id;
  document.querySelector("[name=color_base]").value=base;
  document.querySelector("[name=color_secundario]").value=sec;
  document.querySelector("[name=material]").value=mat;
}
</script>


{% endblock %}